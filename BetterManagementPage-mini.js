!function(){"use strict";"id.sonyentertainmentnetwork.com"==window.location.host?(window.realNameClick=function(){var e=document.getElementsByClassName("primary-button row-button text-button")[0];window.overrideNameChangeRequest=!0;var t=document.getElementsByClassName("textfield ember-text-field ember-view")[0],n=document.getElementsByClassName("textfield ember-text-field ember-view")[1],a=document.getElementsByClassName("textfield ember-text-field ember-view")[2];window.overrideFirstName=t.value,window.overrideMiddleName=n.value,window.overrideLastName=a.value,t.value="OVERRIDDEN",n.value="OVERRIDDEN",a.value="OVERRIDDEN";var i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!0,!0),t.dispatchEvent(i),(i=document.createEvent("KeyboardEvent")).initEvent("keyup",!0,!0),n.dispatchEvent(i),(i=document.createEvent("KeyboardEvent")).initEvent("keyup",!0,!0),a.dispatchEvent(i),e.click()},window.updateAboutMe=function(e){var t=document.getElementsByClassName("textarea fixed-width ")[0];window.overrideAboutMe=t.value,t.value=e;var n=document.createEvent("Event");n.initEvent("input",!0,!0),t.dispatchEvent(n)},window.waitForSave=function(){var e=document.getElementsByClassName("primary-button row-button text-button")[0];e.hasAttribute("disabled")?window.setTimeout(window.waitForSave,0):e.click()},window.aboutMeClick=function(){document.getElementsByClassName("primary-button row-button text-button")[0];window.overrideAboutMeChangeRequest=!0,window.updateAboutMe("OVERRIDDEN"),window.waitForSave()},window.updateAboutMeLabel=function(){var e=document.getElementsByClassName("pdr-list-column main-text bold-text")[2];null!=e?e.innerText=window.originalAbout:window.setTimeout(window.updateAboutMeLabel,0)},window.buttonAdded=!1,window.enablePage=function(){var e=document.getElementsByClassName("primary-button row-button text-button")[0];if(null!=e){var t=document.querySelector("*[data-components='pdr-about-me']"),n=document.getElementsByClassName("theme-realname ember-view")[0];if((null!=n||null!=t)&&!window.buttonAdded){window.buttonAdded=!0;var a=e.parentElement.parentElement;a.appendChild(document.createElement("div")).setAttribute("class","separator-pageitems beside narrow");var i=a.appendChild(document.createElement("div"));i.setAttribute("data-components","pdr-button"),i.setAttribute("class","column-flex button ember-view");var s=i.appendChild(document.createElement("button"));s.innerHTML='<span dir="ltr" class="caption">Force Save</span>',s.setAttribute("tabIndex",3),s.setAttribute("class","primary-button row-button text-button"),null!=n&&s.setAttribute("onclick","realNameClick()"),null!=t&&(updateAboutMe(document.getElementsByClassName("pdr-list-column main-text bold-text")[2].innerText),s.setAttribute("onclick","aboutMeClick()"))}}else window.buttonAdded=!1;window.setTimeout(window.enablePage,0)},window.setTimeout(window.enablePage,0),XMLHttpRequest.prototype.openOg=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(e,t,n){return"GET"==e&&t.includes("regcam/api")&&t.includes("users/me/profile")&&(this.sendOg=this.send,this.send=function(){return this.onreadystatechangeOg=this.onreadystatechange,this.onreadystatechange=function(){if(4===this.readyState){var e=this.response,t=this.responseText;window.originalAbout=JSON.parse(e).aboutMe,window.updateAboutMeLabel(),Object.defineProperty(this,"response",{writable:!0}),Object.defineProperty(this,"responseText",{writable:!0}),this.response=e.replace(/\\u..../g,""),this.responseText=t.replace(/\\u..../g,""),Object.defineProperty(this,"response",{writable:!1}),Object.defineProperty(this,"responseText",{writable:!1})}return this.onreadystatechangeOg()},this.sendOg()}),"POST"==e&&t.includes("users/me/profile")&&window.overrideAboutMeChangeRequest&&(this.sendOg=this.send,this.send=function(e){var t=JSON.parse(e);t.aboutMe=window.overrideAboutMe;var n=JSON.stringify(t);console.log(e+" -> "+n),this.onreadystatechangeOg=this.onreadystatechange,this.onreadystatechange=function(){return 4===this.readyState&&500==this.status&&(Object.defineProperty(this,"status",{writable:!0}),Object.defineProperty(this,"statusText",{writable:!0}),this.status=200,this.statusText="OK",Object.defineProperty(this,"status",{writable:!1}),Object.defineProperty(this,"statusText",{writable:!1})),this.onreadystatechangeOg()},window.overrideAboutMeChangeRequest=!1;try{return this.sendOg(n)}catch(e){}}),"PUT"==e&&t.includes("accounts/me/communication")&&window.overrideNameChangeRequest&&(this.sendOg=this.send,this.send=function(e){var t=JSON.parse(e);t.realName.name.first=window.overrideFirstName,t.realName.name.middle=window.overrideMiddleName,t.realName.name.last=window.overrideLastName;var n=JSON.stringify(t);return console.log(e+" -> "+n),this.sendOg(n)},window.overrideNameChangeRequest=!1),"PUT"==e&&t.includes("users/me/avatar")&&(this.sendOg=this.send,this.send=function(e){'{"avatarId":100000}'==e&&(console.log("Setting default avatar."),e='{"avatarId":0}'),this.sendOg(e)}),"GET"==e&&t.includes("avatars/categories/0?offset=0&limit=48")&&(this.sendOg=this.send,this.send=function(){return this.onreadystatechangeOg=this.onreadystatechange,this.onreadystatechange=function(){if(4===this.readyState){var e=JSON.parse(this.response);e.avatars.unshift({avatarId:1e5,avatarUrls:[{size:"m",avatarUrl:"https://static-resource.np.community.playstation.net/avatar_m/default/DefaultAvatar_m.png"}]});var t=JSON.stringify(e);Object.defineProperty(this,"response",{writable:!0}),Object.defineProperty(this,"responseText",{writable:!0}),this.response=t,this.responseText=t,Object.defineProperty(this,"response",{writable:!1}),Object.defineProperty(this,"responseText",{writable:!1})}return this.onreadystatechangeOg()},this.sendOg()}),this.openOg(e,t,n)},alert("Better Management Page script by SilicaAndPina loaded! and on the correct domain.")):alert('Wrong domain! please run on\n"https://id.sonyentertainmentnetwork.com/id/management/#/p/psn_profile".')}();
